{"timestamp":"2023-08-31T14:16:27.969Z","maxPoints":15,"minusPoints":3.5,"seed":1,"results":[{"id":"101","minusPoints":0},{"id":"102","minusPoints":0},{"id":"103","minusPoints":0},{"id":"104","minusPoints":0},{"id":"105","minusPoints":0},{"id":"106","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://zin.test';\n  process.env.BLING_API_KEY = 'ak_EO5VYJBWsCXPsmi_XsDut';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Met API\n\n  All GET requests to relevant parts of the Met API will return random responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- search for bowerbird\n\n  - send GET request to /artworks?q=bowerbird\n\n    GET /artworks?q=bowerbird HTTP/1.1\n    Host: localhost:53753\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n- expect search results to match corresponding Met search results\n\nExpected:\n  [\n    {\n      \"artworkId\": 203305,\n      \"title\": \"Baptacke jihe\",\n      \"artist\": \"Bobby Morton\",\n      \"date\": \"1667\",\n      \"image\": \"https://images.example.com/H12330.jpg\"\n    },\n    {\n      \"artworkId\": 918204,\n      \"title\": \"Nip waeho otviwug bevkog dirlafi difbelo\",\n      \"artist\": \"Ethan Kevin Lawrence\",\n      \"date\": \"1692\",\n      \"image\": \"https://images.example.com/6N7R82.jpg\"\n    },\n    {\n      \"artworkId\": 109471,\n      \"title\": \"Ludaz\",\n      \"artist\": \"Norman David Stevenson\",\n      \"date\": \"1650\",\n      \"image\": \"https://images.example.com/W7G1N2.jpg\"\n    },\n    {\n      \"artworkId\": 306328,\n      \"title\": \"Guclaslam muv ju tas dec nusbil\",\n      \"artist\": \"Bradley Erik Estrada\",\n      \"date\": \"1935\",\n      \"image\": \"https://images.example.com/LK23D0.jpg\"\n    }\n  ]\n\nReceived:\n  []"},{"id":"107","minusPoints":0},{"id":"108","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://pirgis.test';\n  process.env.BLING_API_KEY = 'ak_FtVX-_IFSajDAT1-v6DcK';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Met API\n\n  All GET requests to relevant parts of the Met API will return random responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- search for cricket\n\n  - send GET request to /artworks?q=cricket\n\n    GET /artworks?q=cricket HTTP/1.1\n    Host: localhost:53777\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n- expect search results to match corresponding Met search results\n\nExpected:\n  [\n    {\n      \"artworkId\": 786747,\n      \"title\": \"Gubu sovkew iwetulsiz hiusame bascug uja cuveco puvire kac onappep\",\n      \"artist\": \"Lester Padilla\",\n      \"date\": \"1578\",\n      \"image\": \"https://images.example.com/UEQPAN.jpg\"\n    },\n    {\n      \"artworkId\": 945549,\n      \"title\": \"Cuup bu fevredesu mu wahadsev vifjigge med ebetif\",\n      \"artist\": \"Benjamin Paul Parker\",\n      \"date\": \"1986\",\n      \"image\": \"https://images.example.com/3CF82Q.jpg\"\n    },\n    {\n      \"artworkId\": 350345,\n      \"title\": \"Jinu jismesep areuc aznur fes vevora\",\n      \"artist\": \"Cecelia Olga Logan\",\n      \"date\": \"1551\",\n      \"image\": \"https://images.example.com/0I4GR7.jpg\"\n    }\n  ]\n\nReceived:\n  []"},{"id":"201","minusPoints":0},{"id":"202","minusPoints":0},{"id":"203","minusPoints":0},{"id":"204","minusPoints":0},{"id":"205","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://pubsav.test';\n  process.env.BLING_API_KEY = 'ak_znWLvqZc1Qd7Ed5VkO-BN';\n\n  const app = require('./app');\n  app.listen(0);\n\n- create new cart\n\n  - send GET request to /cart\n\n    GET /cart HTTP/1.1\n    Host: localhost:53745\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Set-Cookie: sessionId=AIjL-qiXwxTgOLOdHxmCM; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain session cookie\n\n  - expect response to contain JSON payload\n\n  - expect JSON payload to be an empty cart\n\n- send POST request to /cart with cookie and JSON payload\n\n  POST /cart HTTP/1.1\n  Host: localhost:53745\n  Cookie: sessionId=AIjL-qiXwxTgOLOdHxmCM\n  Content-Type: application/json\n  Content-Length: 124\n\n  {\n    \"artworkId\": 197195,\n    \"printSize\": \"M\",\n    \"frameStyle\": \"elegant\",\n    \"matWidth\": 5091379698991104,\n    \"matColor\": \"ni\"\n  }\n\n- receive response\n\n  HTTP/1.1 201 Created\n  X-Powered-By: Express\n  Set-Cookie: sessionId=AIjL-qiXwxTgOLOdHxmCM; Path=/\n  Content-Type: application/json; charset=utf-8\n  Content-Length: 16\n  ETag: W/\"10-Nk7hpRoDjGq6R9hoZEQ2eqLt39U\"\n  Date: Thu, 31 Aug 2023 14:16:30 GMT\n  Connection: close\n\n  {\"cartItemId\":1}\n\n- expect response status to be 400 Bad Request\n\nExpected: 400 Bad Request\nReceived: 201 Created"},{"id":"206","minusPoints":0},{"id":"207","minusPoints":0},{"id":"208","minusPoints":0},{"id":"209","minusPoints":0},{"id":"210","minusPoints":0},{"id":"211","minusPoints":0},{"id":"212","minusPoints":0},{"id":"213","minusPoints":0},{"id":"301","minusPoints":0},{"id":"302","minusPoints":0},{"id":"303","minusPoints":0},{"id":"304","minusPoints":0},{"id":"305","minusPoints":0},{"id":"306","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://mak.test';\n  process.env.BLING_API_KEY = 'ak_S4ayyBMf0b45kpWQm-Vvw';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Bling API\n\n  All requests to relevant parts of the Bling API will return internally consistent mock responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- create new cart\n\n  - send GET request to /cart\n\n    GET /cart HTTP/1.1\n    Host: localhost:53755\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Set-Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain session cookie\n\n  - expect response to contain JSON payload\n\n  - expect JSON payload to be an empty cart\n\n- add item to cart\n\n  - send POST request to /cart with cookie and JSON payload\n\n    POST /cart HTTP/1.1\n    Host: localhost:53755\n    Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ\n    Content-Type: application/json\n    Content-Length: 136\n\n    {\n      \"artworkId\": 806551,\n      \"printSize\": \"S\",\n      \"frameStyle\": \"elegant\",\n      \"frameWidth\": 49,\n      \"matWidth\": 10,\n      \"matColor\": \"cerulean\"\n    }\n\n  - receive response\n\n    HTTP/1.1 201 Created\n    X-Powered-By: Express\n    Set-Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 16\n    ETag: W/\"10-Nk7hpRoDjGq6R9hoZEQ2eqLt39U\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"cartItemId\":1}\n\n  - expect response status to be 201 Created\n\n- add item to cart\n\n  - send POST request to /cart with cookie and JSON payload\n\n    POST /cart HTTP/1.1\n    Host: localhost:53755\n    Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ\n    Content-Type: application/json\n    Content-Length: 108\n\n    {\n      \"artworkId\": 575538,\n      \"printSize\": \"S\",\n      \"frameStyle\": \"shabby\",\n      \"frameWidth\": 48,\n      \"matWidth\": 0\n    }\n\n  - receive response\n\n    HTTP/1.1 201 Created\n    X-Powered-By: Express\n    Set-Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 16\n    ETag: W/\"10-NOA92BQEISd87j7eI+0NQu1dPMI\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"cartItemId\":2}\n\n  - expect response status to be 201 Created\n\n- initiate checkout\n\n  - send POST request to /cart/checkout with cookie and JSON payload\n\n    POST /cart/checkout HTTP/1.1\n    Host: localhost:53755\n    Cookie: sessionId=FyYl9B91XNyfIEE36yoPQ\n    Content-Type: application/json\n    Content-Length: 203\n\n    {\n      \"email\": \"tewel@example.com\",\n      \"shipping_address\": {\n        \"name\": \"Isabella Mendoza\",\n        \"address\": \"1397 Nawe Manor\",\n        \"city\": \"Wepikbof\",\n        \"country\": \"DE\",\n        \"postal_code\": \"TW9 5MR\"\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 123\n    ETag: W/\"7b-ffAio3ziHy3cY4tOcNdWLwBdPxo\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"payment_intent_id\":\"pi_wUulWHn37ty2VbT1KQaD-\",\"client_secret\":\"cs_ptBiFt_AAhQguP1m52Ipl\",\"amount\":16260,\"currency\":\"eur\"}\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n  - expect a Bling payment intent to have been created\n\n  - expect response to match the corresponding Bling payment intent\n\n    The payment intent object returned by the (mock) Bling API was {\n      \"id\": \"pi_wUulWHn37ty2VbT1KQaD-\",\n      \"created_at\": &quot;2023-08-31T14:16:30.412Z&quot;,\n      \"amount\": 16260,\n      \"currency\": \"eur\",\n      \"client_secret\": \"cs_ptBiFt_AAhQguP1m52Ipl\",\n      \"webhook\": \"https://mak.test/cart/checkout/payment-update\",\n      \"status\": \"created\"\n    }\n\n- inspect orders directory\n\n- simulate a successful payment\n\n  A (simulated) client has sent a POST request to the (mock) Bling server endpoint /payment_intents/pi_wUulWHn37ty2VbT1KQaD-/confirm with the following payload: {\n    \"client_secret\": \"cs_ptBiFt_AAhQguP1m52Ipl\",\n    \"cardholder\": \"Fanny Garcia\",\n    \"cardnumber\": \"201443131885948\",\n    \"exp_month\": 7,\n    \"exp_year\": 2028,\n    \"cvc\": 846\n  }Bling will accept the payment and send an event to the corresponding webhook.\n\n  - send POST request to /cart/checkout/payment-update with JSON payload\n\n    POST /cart/checkout/payment-update HTTP/1.1\n    Host: localhost:53755\n    Content-Type: application/json\n    Content-Length: 532\n\n    {\n      \"id\": \"ev_tPN2S9wZ_8AgfdKyKXSSw\",\n      \"created_at\": &quot;2023-08-31T14:16:30.414Z&quot;,\n      \"type\": \"payment.succeeded\",\n      \"payment_intent\": {\n        \"id\": \"pi_wUulWHn37ty2VbT1KQaD-\",\n        \"created_at\": &quot;2023-08-31T14:16:30.412Z&quot;,\n        \"amount\": 16260,\n        \"currency\": \"eur\",\n        \"client_secret\": \"cs_ptBiFt_AAhQguP1m52Ipl\",\n        \"webhook\": \"https://mak.test/cart/checkout/payment-update\",\n        \"status\": \"succeeded\",\n        \"card\": {\n          \"cardholder\": \"Fanny Garcia\",\n          \"last4\": \"5948\",\n          \"exp_month\": 7,\n          \"exp_year\": 2028\n        }\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 403 Forbidden\n    X-Powered-By: Express\n    Content-Type: text/plain; charset=utf-8\n    Content-Length: 9\n    ETag: W/\"9-PatfYBLj4Um1qTm5zrukoLhNyPU\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    Forbidden\n\n  - expect response status to be 204 No Content\n\nExpected: 204 No Content\nReceived: 403 Forbidden"},{"id":"307","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://vebsadco.test';\n  process.env.BLING_API_KEY = 'ak_jPOopPgcV3f9I62BVodfq';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Bling API\n\n  All requests to relevant parts of the Bling API will return internally consistent mock responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- create new cart\n\n  - send GET request to /cart\n\n    GET /cart HTTP/1.1\n    Host: localhost:53770\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Set-Cookie: sessionId=WjV0TD1iPW9DC1BajTo41; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain session cookie\n\n  - expect response to contain JSON payload\n\n  - expect JSON payload to be an empty cart\n\n- add item to cart\n\n  - send POST request to /cart with cookie and JSON payload\n\n    POST /cart HTTP/1.1\n    Host: localhost:53770\n    Cookie: sessionId=WjV0TD1iPW9DC1BajTo41\n    Content-Type: application/json\n    Content-Length: 130\n\n    {\n      \"artworkId\": 436669,\n      \"printSize\": \"M\",\n      \"frameStyle\": \"natural\",\n      \"frameWidth\": 36,\n      \"matWidth\": 4,\n      \"matColor\": \"tea\"\n    }\n\n  - receive response\n\n    HTTP/1.1 201 Created\n    X-Powered-By: Express\n    Set-Cookie: sessionId=WjV0TD1iPW9DC1BajTo41; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 16\n    ETag: W/\"10-Nk7hpRoDjGq6R9hoZEQ2eqLt39U\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"cartItemId\":1}\n\n  - expect response status to be 201 Created\n\n- initiate checkout\n\n  - send POST request to /cart/checkout with cookie and JSON payload\n\n    POST /cart/checkout HTTP/1.1\n    Host: localhost:53770\n    Cookie: sessionId=WjV0TD1iPW9DC1BajTo41\n    Content-Type: application/json\n    Content-Length: 234\n\n    {\n      \"email\": \"bojibro@example.com\",\n      \"shipping_address\": {\n        \"name\": \"Harold Gonzales\",\n        \"address\": \"617 Talej Circle\",\n        \"city\": \"Cemazu\",\n        \"country\": \"DE\",\n        \"postal_code\": \"CM3 3VA\",\n        \"phone\": \"(367) 742-3441\"\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 123\n    ETag: W/\"7b-xhCEHIvqs65VrspSeWWgKUQ04eo\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"payment_intent_id\":\"pi_xE8esc7kmuZqwmLEfi35T\",\"client_secret\":\"cs_zkIMcLsKv8UFDJddoU7XN\",\"amount\":14960,\"currency\":\"eur\"}\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n  - expect a Bling payment intent to have been created\n\n  - expect response to match the corresponding Bling payment intent\n\n    The payment intent object returned by the (mock) Bling API was {\n      \"id\": \"pi_xE8esc7kmuZqwmLEfi35T\",\n      \"created_at\": &quot;2023-08-31T14:16:30.486Z&quot;,\n      \"amount\": 14960,\n      \"currency\": \"eur\",\n      \"client_secret\": \"cs_zkIMcLsKv8UFDJddoU7XN\",\n      \"webhook\": \"https://vebsadco.test/cart/checkout/payment-update\",\n      \"status\": \"created\"\n    }\n\n- simulate a successful payment\n\n  A (simulated) client has sent a POST request to the (mock) Bling server endpoint /payment_intents/pi_xE8esc7kmuZqwmLEfi35T/confirm with the following payload: {\n    \"client_secret\": \"cs_zkIMcLsKv8UFDJddoU7XN\",\n    \"cardholder\": \"Helen Fisher\",\n    \"cardnumber\": \"6287864049697527\",\n    \"exp_month\": 2,\n    \"exp_year\": 2024,\n    \"cvc\": 142\n  }Bling will accept the payment and send an event to the corresponding webhook.\n\n  - send POST request to /cart/checkout/payment-update with JSON payload\n\n    POST /cart/checkout/payment-update HTTP/1.1\n    Host: localhost:53770\n    Content-Type: application/json\n    Content-Length: 537\n\n    {\n      \"id\": \"ev_JU57RuVwDVMQ0RmohFe1X\",\n      \"created_at\": &quot;2023-08-31T14:16:30.487Z&quot;,\n      \"type\": \"payment.succeeded\",\n      \"payment_intent\": {\n        \"id\": \"pi_xE8esc7kmuZqwmLEfi35T\",\n        \"created_at\": &quot;2023-08-31T14:16:30.486Z&quot;,\n        \"amount\": 14960,\n        \"currency\": \"eur\",\n        \"client_secret\": \"cs_zkIMcLsKv8UFDJddoU7XN\",\n        \"webhook\": \"https://vebsadco.test/cart/checkout/payment-update\",\n        \"status\": \"succeeded\",\n        \"card\": {\n          \"cardholder\": \"Helen Fisher\",\n          \"last4\": \"7527\",\n          \"exp_month\": 2,\n          \"exp_year\": 2024\n        }\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 403 Forbidden\n    X-Powered-By: Express\n    Content-Type: text/plain; charset=utf-8\n    Content-Length: 9\n    ETag: W/\"9-PatfYBLj4Um1qTm5zrukoLhNyPU\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    Forbidden\n\n  - expect response status to be 204 No Content\n\nExpected: 204 No Content\nReceived: 403 Forbidden"},{"id":"308","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://akupohva.test';\n  process.env.BLING_API_KEY = 'ak_RbL_P2BvvjryMNYSCtff-';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Bling API\n\n  All requests to relevant parts of the Bling API will return internally consistent mock responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- create new cart\n\n  - send GET request to /cart\n\n    GET /cart HTTP/1.1\n    Host: localhost:53784\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Set-Cookie: sessionId=qW72nKgJBELu832mlJRX8; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 2\n    ETag: W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    []\n\n  - expect response status to be 200 OK\n\n  - expect response to contain session cookie\n\n  - expect response to contain JSON payload\n\n  - expect JSON payload to be an empty cart\n\n- add item to cart\n\n  - send POST request to /cart with cookie and JSON payload\n\n    POST /cart HTTP/1.1\n    Host: localhost:53784\n    Cookie: sessionId=qW72nKgJBELu832mlJRX8\n    Content-Type: application/json\n    Content-Length: 133\n\n    {\n      \"artworkId\": 825954,\n      \"printSize\": \"M\",\n      \"frameStyle\": \"elegant\",\n      \"frameWidth\": 45,\n      \"matWidth\": 9,\n      \"matColor\": \"raisin\"\n    }\n\n  - receive response\n\n    HTTP/1.1 201 Created\n    X-Powered-By: Express\n    Set-Cookie: sessionId=qW72nKgJBELu832mlJRX8; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 16\n    ETag: W/\"10-Nk7hpRoDjGq6R9hoZEQ2eqLt39U\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"cartItemId\":1}\n\n  - expect response status to be 201 Created\n\n- add item to cart\n\n  - send POST request to /cart with cookie and JSON payload\n\n    POST /cart HTTP/1.1\n    Host: localhost:53784\n    Cookie: sessionId=qW72nKgJBELu832mlJRX8\n    Content-Type: application/json\n    Content-Length: 132\n\n    {\n      \"artworkId\": 696098,\n      \"printSize\": \"S\",\n      \"frameStyle\": \"shabby\",\n      \"frameWidth\": 36,\n      \"matWidth\": 7,\n      \"matColor\": \"cerise\"\n    }\n\n  - receive response\n\n    HTTP/1.1 201 Created\n    X-Powered-By: Express\n    Set-Cookie: sessionId=qW72nKgJBELu832mlJRX8; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 16\n    ETag: W/\"10-NOA92BQEISd87j7eI+0NQu1dPMI\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"cartItemId\":2}\n\n  - expect response status to be 201 Created\n\n- get cart\n\n  - send GET request to /cart with cookie\n\n    GET /cart HTTP/1.1\n    Host: localhost:53784\n    Cookie: sessionId=qW72nKgJBELu832mlJRX8\n\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Set-Cookie: sessionId=qW72nKgJBELu832mlJRX8; Path=/\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 275\n    ETag: W/\"113-gCZzoMr5DyHAt67cJWV3/Az3BEA\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    [{\"cartItemId\":1,\"price\":15190,\"artworkId\":825954,\"printSize\":\"M\",\"frameStyle\":\"elegant\",\"frameWidth\":45,\"matWidth\":9,\"matColor\":\"raisin\"},{\"cartItemId\":2,\"price\":7135,\"artworkId\":696098,\"printSize\":\"S\",\"frameStyle\":\"shabby\",\"frameWidth\":36,\"matWidth\":7,\"matColor\":\"cerise\"}]\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n- initiate checkout\n\n  - send POST request to /cart/checkout with cookie and JSON payload\n\n    POST /cart/checkout HTTP/1.1\n    Host: localhost:53784\n    Cookie: sessionId=qW72nKgJBELu832mlJRX8\n    Content-Type: application/json\n    Content-Length: 198\n\n    {\n      \"email\": \"li@example.com\",\n      \"shipping_address\": {\n        \"name\": \"Manuel Valdez\",\n        \"address\": \"1172 Jeum Street\",\n        \"city\": \"Omlaras\",\n        \"country\": \"GB\",\n        \"postal_code\": \"TS9W 8JT\"\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 200 OK\n    X-Powered-By: Express\n    Content-Type: application/json; charset=utf-8\n    Content-Length: 123\n    ETag: W/\"7b-/r/5LtbKNDuNmgcAULVm5uhM/os\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    {\"payment_intent_id\":\"pi_xPRR-TI8UZW-KiTIT1J52\",\"client_secret\":\"cs_SNpj5ts8vUDpD2nJgHt_c\",\"amount\":25325,\"currency\":\"eur\"}\n\n  - expect response status to be 200 OK\n\n  - expect response to contain JSON payload\n\n  - expect a Bling payment intent to have been created\n\n  - expect response to match the corresponding Bling payment intent\n\n    The payment intent object returned by the (mock) Bling API was {\n      \"id\": \"pi_xPRR-TI8UZW-KiTIT1J52\",\n      \"created_at\": &quot;2023-08-31T14:16:30.560Z&quot;,\n      \"amount\": 25325,\n      \"currency\": \"eur\",\n      \"client_secret\": \"cs_SNpj5ts8vUDpD2nJgHt_c\",\n      \"webhook\": \"https://akupohva.test/cart/checkout/payment-update\",\n      \"status\": \"created\"\n    }\n\n- inspect orders directory\n\n- simulate a failed payment\n\n  A (simulated) client has sent a POST request to the (mock) Bling server endpoint /payment_intents/pi_xPRR-TI8UZW-KiTIT1J52/confirm with the following payload: {\n    \"client_secret\": \"cs_SNpj5ts8vUDpD2nJgHt_c\",\n    \"cardholder\": \"Jorge Munoz\",\n    \"cardnumber\": \"4903229224483953\",\n    \"exp_month\": 8,\n    \"exp_year\": 2027,\n    \"cvc\": 956\n  }Bling will decline the payment and send an event to the corresponding webhook.\n\n  - send POST request to /cart/checkout/payment-update with JSON payload\n\n    POST /cart/checkout/payment-update HTTP/1.1\n    Host: localhost:53784\n    Content-Type: application/json\n    Content-Length: 568\n\n    {\n      \"id\": \"ev_4cDwS86HSYT5Uzji2l-rQ\",\n      \"created_at\": &quot;2023-08-31T14:16:30.562Z&quot;,\n      \"type\": \"payment.failed\",\n      \"payment_intent\": {\n        \"id\": \"pi_xPRR-TI8UZW-KiTIT1J52\",\n        \"created_at\": &quot;2023-08-31T14:16:30.560Z&quot;,\n        \"amount\": 25325,\n        \"currency\": \"eur\",\n        \"client_secret\": \"cs_SNpj5ts8vUDpD2nJgHt_c\",\n        \"webhook\": \"https://akupohva.test/cart/checkout/payment-update\",\n        \"status\": \"failed\",\n        \"payment_error\": \"card_declined\",\n        \"card\": {\n          \"cardholder\": \"Jorge Munoz\",\n          \"last4\": \"3953\",\n          \"exp_month\": 8,\n          \"exp_year\": 2027\n        }\n      }\n    }\n\n  - receive response\n\n    HTTP/1.1 403 Forbidden\n    X-Powered-By: Express\n    Content-Type: text/plain; charset=utf-8\n    Content-Length: 9\n    ETag: W/\"9-PatfYBLj4Um1qTm5zrukoLhNyPU\"\n    Date: Thu, 31 Aug 2023 14:16:30 GMT\n    Connection: close\n\n    Forbidden\n\n  - expect response status to be 204 No Content\n\nExpected: 204 No Content\nReceived: 403 Forbidden"},{"id":"309","minusPoints":0.5,"error":"- start app server\n\n  process.env.ARTMART_BASE_URL = 'https://vaztezez.test';\n  process.env.BLING_API_KEY = 'ak_DzqRy066ixCqkfTkH2-go';\n\n  const app = require('./app');\n  app.listen(0);\n\n- start intercepting requests to the Bling API\n\n  All requests to relevant parts of the Bling API will return internally consistent mock responses.\n  All other requests will result in a response of 501 Not Implemented.\n\n- send POST request to /cart/checkout/payment-update with JSON payload\n\n  POST /cart/checkout/payment-update HTTP/1.1\n  Host: localhost:53798\n  Content-Type: application/json\n  Content-Length: 417\n\n  {\n    \"id\": \"ev_xbLtMmF_QO8FOuniroyBh\",\n    \"created_at\": &quot;2021-06-23T09:07:43.973Z&quot;,\n    \"type\": \"payment.succeeded\",\n    \"payment_intent\": {\n      \"id\": \"pi_ZvXbBqtBtyN-X0GD4b8tb\",\n      \"created_at\": &quot;2021-06-23T09:07:43.973Z&quot;,\n      \"amount\": 1566069726642176,\n      \"currency\": \"eur\",\n      \"client_secret\": \"cs_1FeGuZGmxD0-gJaoxF3_b\",\n      \"webhook\": \"https://af.test/cart/checkout/payment-update\",\n      \"status\": \"succeeded\"\n    }\n  }\n\n- receive response\n\n  HTTP/1.1 403 Forbidden\n  X-Powered-By: Express\n  Content-Type: text/plain; charset=utf-8\n  Content-Length: 9\n  ETag: W/\"9-PatfYBLj4Um1qTm5zrukoLhNyPU\"\n  Date: Thu, 31 Aug 2023 14:16:30 GMT\n  Connection: close\n\n  Forbidden\n\n- expect response status to be 400 Bad Request\n\nExpected: 400 Bad Request\nReceived: 403 Forbidden"},{"id":"401","minusPoints":0},{"id":"402","minusPoints":0},{"id":"403","minusPoints":0},{"id":"404","minusPoints":0},{"id":"501","minusPoints":0},{"id":"601","minusPoints":0}]}